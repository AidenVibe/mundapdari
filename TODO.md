# 🌉 Mundapdari 개발 TODO

> **PRD 기반 체계적 개발 관리** - 화면 구성 우선, 백엔드 후속 개발 방식

## 📋 개발 현황 요약

### ✅ 완료된 항목 (85%)
- **기본 아키텍처**: Express 서버, 이중 DB 지원, BaseModel 패턴
- **인증 시스템**: JWT, 전화번호 암호화, 초대 시스템 (95% 완료)
- **API 엔드포인트**: Auth, Question, Answer APIs (90% 완료)
- **프론트엔드 페이지**: Welcome, Login, Register, Home 페이지 구현
- **UI 컴포넌트 시스템**: 11개 핵심 컴포넌트 완성

### ❌ 미완성 항목 (15%)
- **KakaoTalk 연동**: 메시지 발송 API (30% 완료 - 설정만 존재)
- **스케줄링 시스템**: 매일 오전 9시 질문 발송 (20% 완료)
- **주간 요약 카드**: 생성 및 공유 기능 (0% 완료)
- **테스트 코드**: 전체 테스트 인프라 (0% 완료)

---

## 🎯 Phase 1: 프론트엔드 리팩토링 (우선순위)

> **목표**: PRD 요구사항에 맞춘 화면 구성 완성으로 백엔드 개발 방향 확정

### 1.1 PRD 요구사항 대조 분석

#### 📋 체크리스트
- [ ] **WelcomePage**: 초대 및 페어링 플로우 PRD 일치성 확인
- [ ] **RegisterPage**: 부모/자녀 역할 선택 UI 명확성 점검
- [ ] **LoginPage**: 전화번호 기반 로그인 플로우 검증
- [ ] **HomePage**: 오늘의 질문 → 답변 → 상대 답변 확인 플로우 완성도
- [ ] **InvitePage**: 초대 링크 수락 프로세스 사용성

#### 🎨 PRD 요구사항 상세 매핑
```
PRD 요구사항 → 현재 구현 상태

1. 페어링 시스템 (1:1 부모-자녀)
   ✅ 초대 링크 생성: AuthController.createInvitation
   ✅ 초대 수락: AuthController.acceptInvitation
   ❓ UI/UX: 3클릭 내 완료 여부 확인 필요

2. 일일 Q&A 플로우
   ✅ 질문 조회: QuestionController.getTodaysQuestion
   ❓ 답변 입력: 500자 제한, 상태 표시 확인 필요
   ❓ 상대 답변 확인: 실시간 반영 여부 점검

3. 알림 시스템
   ❌ 매일 오전 9시 KakaoTalk 발송: 미구현
   ❌ 리마인더 알림: 미구현
```

### 1.2 UX/UI 개선 작업

#### 📱 접근성 개선 (60대+ 사용자 고려)
- [ ] **폰트 크기**: 최소 16px, 중요 텍스트 18px 이상
- [ ] **버튼 크기**: 최소 44px 터치 타겟 확보
- [ ] **색상 대비**: WCAG AA 기준 충족 (4.5:1 이상)
- [ ] **텍스트 간격**: 줄간격 1.5em 이상

#### 📱 카카오톡 인앱브라우저 최적화
- [ ] **웹뷰 호환성**: iOS/Android 카카오톡 인앱브라우저 테스트
- [ ] **로딩 성능**: 초기 로딩 시간 3초 이내
- [ ] **뒤로가기 처리**: 카카오톡 앱으로 자연스러운 복귀

#### 🎨 모바일 반응형 개선
- [ ] **터치 인터랙션**: 스크롤, 탭, 스와이프 최적화
- [ ] **키보드 대응**: 답변 입력 시 뷰포트 조정
- [ ] **가로/세로 모드**: 모든 기기에서 정상 표시

### 1.3 세부 기능 구현

#### 💬 답변 시스템 개선
- [ ] **글자 수 제한**: 500자 실시간 카운터 표시
- [ ] **임시 저장**: 작성 중 내용 자동 보존
- [ ] **답변 상태**: "대기중/완료" 명확한 시각적 표시
- [ ] **상대 답변 알림**: 상대방 답변 완료 시 즉시 알림

#### 🎯 사용자 경험 개선
- [ ] **온보딩**: 첫 사용자를 위한 간단한 가이드
- [ ] **에러 처리**: 사용자 친화적 에러 메시지
- [ ] **로딩 상태**: 모든 비동기 작업에 로딩 표시

---

## 🔧 Phase 2: 백엔드 핵심 기능 완성

> **목표**: 프론트엔드에서 확정된 사용자 플로우에 맞는 백엔드 완성

### 2.1 KakaoTalk API 연동 (최우선)

#### 📨 메시지 발송 시스템
- [ ] **카카오 비즈니스 API 설정**: 앱 등록 및 토큰 발급
- [ ] **메시지 템플릿 작성**: 
  - 일일 질문 발송 템플릿
  - 답변 완료 알림 템플릿  
  - 주간 요약 카드 템플릿
- [ ] **발송 로직 구현**: `notificationService.js` 실제 기능 추가
- [ ] **에러 처리**: 발송 실패 시 재시도 메커니즘

#### 🔗 웹뷰 연동
- [ ] **딥링크 처리**: 카카오톡 → 웹뷰 → 특정 페이지 이동
- [ ] **사용자 인증**: 카카오톡에서 전달되는 사용자 식별
- [ ] **세션 관리**: 웹뷰 내 로그인 상태 유지

### 2.2 스케줄링 시스템

#### ⏰ 자동 질문 발송
- [ ] **Cron Job 설정**: 매일 오전 9시 KST
- [ ] **질문 선택 로직**: 중복 방지, 카테고리 로테이션
- [ ] **발송 대상 관리**: 활성 페어 목록 관리
- [ ] **실패 처리**: 발송 실패 시 로그 및 재시도

#### 📋 질문 관리 시스템
- [ ] **기본 질문 DB**: PRD의 10개 초기 질문 입력
- [ ] **카테고리 시스템**: 일상, 추억, 꿈, 감사 등
- [ ] **관리자 인터페이스**: 질문 추가/수정/비활성화

### 2.3 주간 요약 카드 생성

#### 🎨 카드 생성 시스템
- [ ] **데이터 집계**: 주간 Q&A 데이터 수집
- [ ] **카드 디자인**: HTML/CSS 템플릿 제작
- [ ] **이미지 생성**: Puppeteer 또는 Canvas API 활용
- [ ] **자동 발송**: 일요일 오후 6시 자동 생성 및 전송

#### 📤 공유 기능
- [ ] **카카오톡 공유**: 카드 이미지 + 링크 공유
- [ ] **이미지 저장**: 사용자 갤러리 저장 기능
- [ ] **가족 채팅방 공유**: 다중 공유 지원

---

## 🧪 Phase 3: 통합 및 테스트

> **목표**: 안정적인 서비스 운영을 위한 품질 보증

### 3.1 테스트 코드 작성

#### 🔍 Backend Tests
- [ ] **Unit Tests**: 각 Controller, Service 단위 테스트
- [ ] **Integration Tests**: API 엔드포인트 통합 테스트
- [ ] **Database Tests**: 트랜잭션, 연결 풀 테스트

#### 🎯 Frontend Tests
- [ ] **Component Tests**: UI 컴포넌트 단위 테스트
- [ ] **E2E Tests**: 실제 사용자 플로우 자동화 테스트
- [ ] **Accessibility Tests**: 접근성 자동 검증

### 3.2 성능 최적화

#### ⚡ 속도 개선
- [ ] **API 응답 시간**: 평균 200ms 이하 달성
- [ ] **번들 크기 최적화**: 프론트엔드 초기 로딩 개선
- [ ] **이미지 최적화**: WebP 포맷 적용
- [ ] **캐싱 전략**: Redis 활용 캐싱 구현

#### 📊 모니터링
- [ ] **성능 메트릭**: Core Web Vitals 측정
- [ ] **에러 추적**: Sentry 연동
- [ ] **사용자 분석**: 기본 분석 도구 연동

### 3.3 배포 및 운영

#### 🚀 배포 준비
- [ ] **환경 설정**: 개발/스테이징/운영 환경 분리
- [ ] **CI/CD 파이프라인**: 자동 배포 구성
- [ ] **SSL 인증서**: HTTPS 적용
- [ ] **도메인 설정**: 사용자 친화적 URL

#### 🛡️ 보안 강화
- [ ] **개인정보 보호**: KISA 가이드라인 준수
- [ ] **Rate Limiting**: API 남용 방지
- [ ] **입력 검증**: XSS, SQL Injection 방지
- [ ] **백업 시스템**: 정기 백업 및 복구 테스트

---

## 📈 성공 지표 (PRD 기준)

### MVP 검증 지표
- [ ] **페어링 성공률**: 95% 이상 (3클릭 내 완료)
- [ ] **일일 응답률**: 50% 이상
- [ ] **7일 리텐션**: 70% 이상
- [ ] **메시지 발송 성공률**: 99% 이상
- [ ] **평균 응답 시간**: 1초 이내

### 기술적 지표
- [ ] **가용성**: 99.9% 업타임
- [ ] **응답 시간**: API p95 < 2초
- [ ] **에러율**: < 1%
- [ ] **보안**: 0건의 데이터 유출 사고

---

## 🎯 다음 액션 아이템

### 즉시 시작 (이번 주)
1. **HomePage 오늘의 질문 플로우 분석 및 개선**
2. **답변 입력 UI 500자 제한 및 카운터 추가**
3. **접근성 개선** - 폰트 크기, 버튼 크기 조정

### 단기 목표 (2주 내)
1. **KakaoTalk API 연동 구현**
2. **스케줄링 시스템 기본 구조**
3. **주요 페이지 모바일 최적화**

### 중기 목표 (1개월 내)
1. **주간 요약 카드 시스템**
2. **종합 테스트 실시**
3. **MVP 출시 준비**

---

**Last Updated**: 2025-08-22  
**Next Review**: 매주 월요일  
**Responsible**: Development Team